-- Create database
CREATE DATABASE IF NOT EXISTS weather_label_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE weather_label_db;

-- Monitoring stations table
CREATE TABLE IF NOT EXISTS stations (
    id VARCHAR(255) KEY,
    name VARCHAR(255) NOT NULL,
    longitude DECIMAL(10, 5) NOT NULL,
    latitude DECIMAL(10, 5) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_coordinates (longitude, latitude)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Images table
CREATE TABLE IF NOT EXISTS images (
    id INT AUTO_INCREMENT PRIMARY KEY,
    filename VARCHAR(255) NOT NULL UNIQUE,
    filepath VARCHAR(512) NOT NULL,
    uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    annotated BOOLEAN DEFAULT FALSE,
    is_standard BOOLEAN DEFAULT NULL COMMENT 'NULL=未处理, TRUE=标准图片(有时间和地点), FALSE=非标准图片',
    ocr_time VARCHAR(255) DEFAULT NULL COMMENT 'OCR识别的时间',
    ocr_location VARCHAR(255) DEFAULT NULL COMMENT 'OCR识别的地点',
    INDEX idx_annotated (annotated),
    INDEX idx_is_standard (is_standard)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Annotations table
CREATE TABLE IF NOT EXISTS annotations (
    id INT AUTO_INCREMENT PRIMARY KEY,
    image_id INT NOT NULL,
    category ENUM('积涝', '大雾', '结冰') NOT NULL,
    severity ENUM('无', '轻度', '中度', '重度') NOT NULL,
    observation_time DATETIME NOT NULL,
    location VARCHAR(255) NOT NULL,
    longitude DECIMAL(10, 7) NOT NULL,
    latitude DECIMAL(10, 7) NOT NULL,
    station_id VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (image_id) REFERENCES images(id) ON DELETE CASCADE,
    FOREIGN KEY (station_id) REFERENCES stations(id),
    UNIQUE KEY unique_image_annotation (image_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Records of stations
INSERT INTO `stations` VALUES ('58346', '宜兴本站', 119.80970, 31.33860, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('58351', '江阴本站', 120.29310, 31.89420, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('58354', '无锡本站', 120.35440, 31.61280, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M2873', '定波', 120.24530, 31.92420, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M2874', '北国', 120.51350, 31.76440, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M2875', '应急指挥中心', 120.08620, 31.92330, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M2876', '桐岐', 120.20430, 31.75030, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M2877', '西石桥', 120.08170, 31.88660, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M2881', '丁蜀镇兰山茶场', 119.87580, 31.17720, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M2882', '太华镇乾阳茶场', 119.55970, 31.21080, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M2883', '丁蜀镇白坭村', 119.86780, 31.21720, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M2884', '滆湖西岸', 119.75810, 31.55000, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M2885', '滆湖东岸', 119.79610, 31.52280, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3835', '丁蜀镇伏东村', 119.91140, 31.21530, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3836', '横山水库', 119.57940, 31.24830, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3837', '新建镇', 119.66440, 31.55470, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3838', '和桥镇', 119.87940, 31.48940, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3839', '杨巷镇', 119.63280, 31.50440, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3840', '高堘镇', 119.83440, 31.46780, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3841', '万石镇', 119.96080, 31.47500, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3842', '张渚镇', 119.63500, 31.26890, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3843', '新街街道', 119.75190, 31.36750, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3844', '屺亭街道', 119.87000, 31.42890, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3848', '雪浪街道长广溪', 120.22920, 31.40000, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3849', '南泉', 120.22860, 31.40220, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3850', '崇安寺街道', 120.29440, 31.57310, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3851', '蠡湖街道中桥', 120.27810, 31.53110, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3852', '马山街道', 120.12560, 31.46060, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3853', '羊尖镇', 120.56810, 31.63970, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3854', '蠡湖街道', 120.23030, 31.54610, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3855', '黄巷街道', 120.27640, 31.62170, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3888', '高新白屈港', 120.31330, 31.93860, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3889', '顾山镇', 120.55580, 31.76170, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3890', '利港街道', 120.09250, 31.93250, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3891', '徐霞客镇', 120.30360, 31.74440, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3892', '祝塘镇文林', 120.40940, 31.71110, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3893', '长泾镇', 120.49920, 31.73720, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3894', '新桥镇', 120.49030, 31.81640, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3895', '云亭街道', 120.35170, 31.86810, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3896', '申港街道', 120.12830, 31.86860, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M3897', '高新', 120.38060, 31.93330, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5851', '芳桥街道', 119.94250, 31.42560, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5852', '周铁镇', 120.01390, 31.46250, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5853', '丁蜀镇', 119.89250, 31.23310, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5854', '丁蜀镇莲花荡', 119.86720, 31.24310, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5855', '张渚镇祝陵村', 119.68670, 31.28000, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5856', '张渚镇红岭茶场', 119.70890, 31.22580, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5857', '徐舍镇堰头村', 119.57000, 31.35670, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5858', '竹海公园', 119.69750, 31.16830, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5859', '官林镇', 119.67390, 31.48640, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5860', '太华镇', 119.58610, 31.18500, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5881', '东港镇港下', 120.54890, 31.69750, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5882', '东港镇', 120.49750, 31.68470, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5883', '惠山经开', 120.35500, 31.66690, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5884', '安镇街道', 120.46530, 31.61390, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5885', '鹅湖镇', 120.53360, 31.50330, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5886', '新安街道', 120.37860, 31.48580, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5887', '玉祁街道', 120.15360, 31.70500, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5888', '堰桥街道', 120.28030, 31.67920, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5889', '钱桥街道', 120.17670, 31.58500, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5890', '广益街道', 120.31140, 31.58860, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5891', '惠山街道迎龙桥', 120.27750, 31.58000, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5892', '江溪街道', 120.35060, 31.55310, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5906', '南闸街道', 120.23500, 31.87580, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5907', '祝塘镇', 120.39830, 31.74030, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5908', '璜土镇', 120.03940, 31.84940, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5909', '华士镇', 120.46250, 31.87690, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5910', '周庄镇', 120.38170, 31.88780, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5911', '月城镇', 120.19580, 31.80500, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5912', '澄江街道', 120.27940, 31.92500, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M5913', '青阳镇', 120.28810, 31.77060, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7101', '夏港街道', 120.19220, 31.91250, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7102', '徐霞客峭岐', 120.27920, 31.80170, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7103', '湖父镇', 119.75310, 31.23280, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7104', '徐舍镇', 119.65860, 31.39580, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7105', '新庄街道', 119.93000, 31.32060, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7106', '周铁镇洋溪村', 119.96250, 31.37670, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7107', '宜城街道', 119.82170, 31.34670, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7108', '宜城街道南园村', 119.87250, 31.32830, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7111', '梅村街道', 120.42970, 31.54000, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7112', '洛社镇', 120.18060, 31.64640, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7113', '马山古竹', 120.07220, 31.38060, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7114', '阳山镇', 120.10060, 31.58140, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7115', '蠡湖街道辅仁', 120.29500, 31.53390, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7116', '鸿山街道', 120.49170, 31.50060, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7117', '前洲街道', 120.21560, 31.67310, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7118', '太湖街道尚贤', 120.31060, 31.49250, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7119', '锡北镇', 120.43500, 31.65940, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7120', '厚桥街道', 120.50500, 31.57360, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7121', '硕放街道', 120.44920, 31.48750, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7122', '华庄街道', 120.33720, 31.47030, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7123', '胡埭镇', 120.13860, 31.53390, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7124', '雪浪街道', 120.20920, 31.45280, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7125', '宜兴太湖平台', 119.87000, 31.42890, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7126', '太湖仙岛', 120.19640, 31.51970, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7127', '太湖平台', 120.22860, 31.40220, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7130', '周庄镇长寿', 120.35720, 31.83110, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7131', '华士镇陆桥', 120.44720, 31.77640, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('M7144', '清晏路', 120.26250, 31.43580, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL01', '胡埭小南湾区域站', 120.12580, 31.52410, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL02', '雪浪龙寺生态园区域站', 120.22890, 31.44420, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL03', '鸿山区域站', 120.51080, 31.49890, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL04', '玉祁水稻园区区域站', 120.17890, 31.75060, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL05', '东港镇港南村区域站', 120.55720, 31.66670, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL06', '胡埭夏渎村', 120.09110, 31.55720, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL07', '无锡学院站', 120.46830, 31.58560, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL08', '无锡硕放车辆段站', 120.41810, 31.50780, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL09', '无锡地铁幸福停车场站', 120.20500, 31.59250, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL10', '无锡查桥车辆段站', 120.42830, 31.57750, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL11', '地铁青龙山区域站', 120.20830, 31.56030, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL12', '无锡地铁西漳区域站', 120.30310, 31.65720, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL13', '羊尖镇农业专业合作社微智站', 120.54640, 31.65610, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL14', '羊尖镇严家桥区域站', 120.54500, 31.65190, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL16', '无锡匡园双语学校站', 120.19360, 31.68030, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL17', '无锡羊尖镇鑫利园家庭农场站', 120.54560, 31.61220, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL18', '无锡羊尖镇先锋家庭农场站', 120.56220, 31.61110, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL19', '羊尖镇严家桥陆更上', 120.52830, 31.64170, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL20', '羊尖镇严家桥善更巷', 120.57560, 31.64190, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL21', '环保春潮花园站', 120.35500, 31.55580, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL22', '环保汪庄街道水厂', 120.45220, 31.53810, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL23', '鸿山湿地公园微智站', 120.53030, 31.49220, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL24', '囿圃园原生态农业合作社', 120.51940, 31.66220, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL25', '雪浪龙寺生态园微智站', 120.23860, 31.44610, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL26', '观山幼儿园', 120.32720, 31.50030, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL27', '地铁硕放微智站', 120.41810, 31.50750, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL28', '地铁钱桥微智站', 120.20640, 31.59060, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL29', '地铁青龙山微智站', 120.20920, 31.56000, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL30', '胡埭小南湾微智站', 120.12560, 31.52280, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL31', '玉祁水稻园区微智站', 120.18170, 31.74680, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL32', '地铁市北微智站', 120.28330, 31.62720, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL33', '地铁具区路微智站', 120.32580, 31.47830, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL34', '阳山特种水产基地微智站', 120.08190, 31.60940, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL35', '胡埭水蜜桃基地微智站', 120.08190, 31.55500, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL36', '地铁查桥微智站', 120.43970, 31.57690, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL37', '地铁西漳微智站', 120.30060, 31.65670, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL38', '鸿山马家里农场微智站', 120.47420, 31.55420, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL39', '鸿山七房桥微智站', 120.50640, 31.52170, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL40', '鸿山八九浜微智站', 120.50250, 31.46920, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL41', '惠山现代农业产业园微智站', 120.10390, 31.58140, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL42', '马山时铭园微智站', 120.08110, 31.41830, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL43', '葛埭茶厂微智站', 120.25530, 31.45470, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL44', '葛埭茶厂区域站', 120.25720, 31.45390, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('QDL45', '惠山精细蔬菜园微智站', 120.24610, 31.65310, '2025-11-19 00:15:28');
INSERT INTO `stations` VALUES ('YX121', '宜兴新', 119.81670, 31.33330, '2025-11-19 00:15:28');